# Модуль агентов GopiAI

Этот модуль содержит реализации различных агентов для работы с ИИ в приложении GopiAI.

## Структура модуля

```
agent/
├── __init__.py
├── agent_manager.py       # Менеджер агентов
├── base.py                # Базовый класс агента
├── browser.py             # Базовый браузерный агент
├── browser_agent.py       # Улучшенный браузерный агент
├── browser_ai_interface.py # Интерфейс ИИ для браузера
├── browser_specialized_agent.py # Специализированный браузерный агент
├── coding_agent.py        # Агент для работы с кодом
├── coding_agent_interface.py # Интерфейс агента для работы с кодом
├── llm_interaction.py     # Взаимодействие с LLM
├── manus.py               # Агент Manus
├── orchestrator.py        # Оркестратор агентов
├── react.py               # Агент ReAct
├── specialized_agent.py   # Специализированный агент с ограниченным контекстом
├── swe.py                 # Агент SWE
├── thought_tree.py        # Дерево мыслей
└── toolcall.py            # Агент с поддержкой вызова инструментов
```

## Основные компоненты

### Базовые агенты

- `BaseAgent` - базовый класс для всех агентов
- `ToolCallAgent` - агент с поддержкой вызова инструментов
- `ReactAgent` - агент, использующий подход ReAct (Reasoning and Acting)

### Специализированные агенты

- `CodingAgent` - агент для работы с кодом
- `EnhancedBrowserAgent` - улучшенный агент для работы с браузером
- `SpecializedAgent` - агент с ограниченным контекстом, управляемый оркестратором
- `BrowserSpecializedAgent` - специализированный агент для работы с браузером

### Оркестрация

- `AgentManager` - менеджер агентов, предоставляющий доступ к агентам
- `AgentOrchestrator` - оркестратор агентов, управляющий специализированными агентами

## Архитектура оркестрации

Архитектура оркестрации агентов в GopiAI построена на следующих принципах:

1. **Оркестратор** - центральный компонент, который:
   - Индексирует проект для создания контекста
   - Создает специализированных агентов для конкретных задач
   - Предоставляет агентам релевантный контекст
   - Мониторит работу агентов и предоставляет руководство

2. **Специализированные агенты** - агенты с ограниченным контекстом, которые:
   - Фокусируются на конкретной задаче
   - Получают только релевантный контекст
   - Могут получать руководство от оркестратора
   - Сохраняют историю действий для анализа

3. **Интеграция с памятью Serena**:
   - Сохранение контекста проекта
   - Сохранение руководства для агентов
   - Обмен информацией между агентами

## Специализированный браузерный агент

`BrowserSpecializedAgent` объединяет возможности специализированного агента и браузерного агента:

- Ограниченный контекст и руководство от оркестратора
- Управление браузером и анализ веб-страниц
- Интеграция с улучшенным браузерным виджетом
- Контекстно-зависимая обработка запросов

### Пример использования

```python
# Создание специализированного браузерного агента через оркестратор
orchestrator = get_orchestrator()
agent = await orchestrator.create_browser_specialized_agent(
    "browser_agent_1",
    "Найти информацию о Python на официальном сайте"
)

# Обработка запроса
result = await agent.process("Перейди на python.org и найди документацию")
```

## Инструменты для работы с оркестрацией

Для работы с оркестрацией предоставляются следующие инструменты:

- `SerenaMemoryTool` - инструмент для работы с памятью Serena
- `ProjectContextTool` - инструмент для работы с контекстом проекта
- `OrchestratorTool` - инструмент для взаимодействия с оркестратором

## Интеграция с UI

Для интеграции оркестрации с пользовательским интерфейсом используется `OrchestrationController`, который:

- Предоставляет сигналы для обновления UI
- Управляет асинхронными операциями
- Связывает компоненты интерфейса с агентами
