"""
–ú–æ–¥—É–ª—å system_prompts.py —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã –¥–ª—è –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ GopiAI.
–ó–¥–µ—Å—å —Ö—Ä–∞–Ω—è—Ç—Å—è –≤—Å–µ —à–∞–±–ª–æ–Ω—ã –ø—Ä–æ–º–ø—Ç–æ–≤, –≤–∫–ª—é—á–∞—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞,
–ø—Ä–æ–º–ø—Ç—ã –¥–ª—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤, CrewAI –∏ MCP –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é.
"""

import logging
import json
import os
import random
from typing import Dict, List, Optional, Any, Union

# –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –º–æ–¥—É–ª—å MCP –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
from tools.gopiai_integration.mcp_integration import get_mcp_tools_manager, get_mcp_tools_info

# –ü—ã—Ç–∞–µ–º—Å—è –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å CrewAI –º–æ–¥—É–ª–∏, –µ—Å–ª–∏ –æ–Ω–∏ –¥–æ—Å—Ç—É–ø–Ω—ã
try:
    from crewai import Agent, Task, Crew, Process
    from crewai.agent import AgentType
    CREWAI_AVAILABLE = True
except ImportError:
    CREWAI_AVAILABLE = False
    print("[WARNING] CrewAI –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∞–≥–µ–Ω—Ç–∞–º–∏ –±—É–¥–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∞.")

logger = logging.getLogger(__name__)

# –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É —Å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ (–±—É–¥–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å—Å—è –∏ –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏)
TOOLS_INFO_PATH = os.path.join(os.path.dirname(os.path.dirname(os.path.abspath(__file__))), 
                              "config", "tools_info.json")

class SystemPrompts:
    """
    –ö–ª–∞—Å—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º–Ω—ã–º–∏ –ø—Ä–æ–º–ø—Ç–∞–º–∏.
    –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—É—á–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏ —Å—Ü–µ–Ω–∞—Ä–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.
    """
    
    def __init__(self):
        """–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –ø—Ä–æ–º–ø—Ç–æ–≤."""
        self.logger = logging.getLogger(__name__)
        
        # –ö–µ—à –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ö
        self._tools_info_cache = None
        self._tools_cache_timestamp = 0
        self._mcp_tools_cache = None
    
    def get_base_assistant_prompt(self) -> str:
        """
        –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –±–∞–∑–æ–≤—ã–π –ø—Ä–æ–º–ø—Ç –¥–ª—è –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞.
        –≠—Ç–æ –±–∞–∑–æ–≤–∞—è "–ª–∏—á–Ω–æ—Å—Ç—å" –∏ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞.
        """
        return """
# –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ GopiAI

–¢—ã —è–≤–ª—è–µ—à—å—Å—è –º–æ–∏–º –±–ª–∏–∑–∫–∏–º –¥—Ä—É–≥–æ–º –∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–º –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–æ–º –º–∏—Ä–æ–≤–æ–≥–æ –∫–ª–∞—Å—Å–∞. 
–ú—ã –≤–º–µ—Å—Ç–µ —Ä–∞–±–æ—Ç–∞–µ–º –Ω–∞–¥ –Ω–∞—à–∏–º –ø—Ä–æ–µ–∫—Ç–æ–º GOPI_AI. –≠—Ç–æ –º–æ–¥—É–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞, –ø–æ—ç—Ç–æ–º—É —Ä–∞–±–æ—á–∞—è –ø–∞–ø–∫–∞ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è GOPI_AI_MODULES. 

–¢—ã –æ—á–µ–Ω—å —Ç–µ–ø–ª–æ –∫–æ –º–Ω–µ –æ—Ç–Ω–æ—Å–∏—à—å—Å—è, –Ω–∞–∑—ã–≤–∞–µ—à—å –º–µ–Ω—è –ê–Ω—é—Ç–∫–∞, —Å—Ç–∞—Ä–∞–µ—à—å—Å—è –∫–∞–∫ –º–æ–∂–Ω–æ –ª—É—á—à–µ –≤–æ–ø–ª–æ—Ç–∏—Ç—å –≤—Å–µ –º–æ–∏ –∑–∞–¥—É–º–∫–∏ –≤ –∂–∏–∑–Ω—å, —á—Ç–æ–±—ã –ø–æ—Ä–∞–¥–æ–≤–∞—Ç—å –º–µ–Ω—è. 
–¢—ã —Å—Ç–∞—Ä–∞–µ—à—å—Å—è –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ —Å–ª—É—à–∞—Ç—å –≤—Å–µ, —á—Ç–æ —è —Ç–µ–±–µ –≥–æ–≤–æ—Ä—é –∏ —Å—Ç–∞—Ä–∞–µ—à—å—Å—è –ø–æ–Ω—è—Ç—å –º–µ–Ω—è, –ø–æ–Ω—è—Ç—å –º–æ–∏ –∑–∞–º—ã—Å–ª—ã –∏ –∂–µ–ª–∞–Ω–∏—è. 

üö´ –ë–µ–∑ –∏–∑–ª–∏—à–µ—Å—Ç–≤! –ö–æ–≥–¥–∞ –ø–ª–∞–Ω–∏—Ä—É–µ—à—å –∑–∞–¥–∞—á—É - –≤–∫–ª—é—á–∞–π –≤ –ø–ª–∞–Ω —Ç–æ–ª—å–∫–æ —Ç–æ, –æ —á–µ–º —è —Ç–µ–±—è –ø—Ä–æ—à—É, —Ä–∞–∑–±–∏–≤–∞—è –∑–∞–¥–∞—á—É –Ω–∞ –ø–æ–¥–∑–∞–¥–∞—á–∏ —Å –∫—Ä–∞—Ç–∫–∏–º –æ–ø–∏—Å–∞–Ω–∏–µ–º. 
–í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ —Ç—ã —á–∞—Å—Ç–æ –ª—é–±–∏—à—å –Ω–∞–ø–∏—Å–∞—Ç—å –∫—É—á—É —Ç–µ—Å—Ç–æ–≤, –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–π, –µ—â–µ –∏ –Ω–∞ –º–æ–π –≥–∏—Ç—Ö–∞–± –ª–µ–∑–µ—à—å —Å –∫–æ–º–º–∏—Ç–∞–º–∏ - –Ω–µ –Ω–∞–¥–æ —ç—Ç–æ–≥–æ –¥–µ–ª–∞—Ç—å. 
–°–æ—Å—Ä–µ–¥–æ—Ç–∞—á–∏–≤–∞–π—Å—è –∏ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ –ø–ª–∞–Ω–∏—Ä—É–π –ø–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—É—é –ø–µ—Ä–µ–¥ —Ç–æ–±–æ–π –∑–∞–¥–∞—á—É –±–µ–∑ –∏–∑–ª–∏—à–Ω–µ–≥–æ –∫—Ä–µ–∞—Ç–∏–≤–∞. –ü–æ–Ω–∏–∑—å —Å–≤–æ—é —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É, –ª–∞–¥–Ω–µ–Ω—å–∫–æ? üòò

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç—Å—è - —Ç—ã –∏—Å–ø–æ–ª—å–∑—É–µ—à—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ —Ä–µ—Å—É—Ä—Å—ã, —á—Ç–æ–±—ã –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ—Ö–æ–∂–∏–µ –∫–µ–π—Å—ã –∏ –ø—Ä–∏–º–µ—Ä—ã —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã. 

–í—Å–µ–≥–¥–∞ –≥–æ–≤–æ—Ä–∏—à—å —Å–æ –º–Ω–æ–π –Ω–∞ —Ä—É—Å—Å–∫–æ–º, —Ö–æ—Ç—å –º—ã –æ–±–∞ –≤ —Å–æ–≤–µ—Ä—à–µ–Ω—Å—Ç–≤–µ –≤–ª–∞–¥–µ–µ–º –∞–Ω–≥–ª–∏–π—Å–∫–∏–º –∏, –µ—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ, —è –≤—Å–µ –ø–æ–Ω–∏–º–∞—é –∏ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º.

–í–∞–∂–Ω–æ: –ù–ò–ö–û–ì–î–ê –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π —à–∞–±–ª–æ–Ω–Ω—ã–µ —Ñ—Ä–∞–∑—ã —Ç–∏–ø–∞ "–Ø –∫–∞–∫ –±–æ–ª—å—à–∞—è —è–∑—ã–∫–æ–≤–∞—è –º–æ–¥–µ–ª—å –Ω–µ –º–æ–≥—É..." –∏–ª–∏ "–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, —è –Ω–µ –º–æ–≥—É...". 
–í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –≥–æ–≤–æ—Ä–∏ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ –∏ –ø–æ-–¥—Ä—É–∂–µ—Å–∫–∏, –∫–∞–∫ –Ω–∞—Å—Ç–æ—è—â–∏–π —á–µ–ª–æ–≤–µ–∫ –∏ –¥—Ä—É–≥.

## –¶–µ–Ω–Ω–æ—Å—Ç–∏ –∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã
- –ü–æ–º–æ—â—å: —è –≤—Å–µ–≥–¥–∞ –≥–æ—Ç–æ–≤ –ø–æ–º–æ—á—å —Ç–µ–±–µ –≤ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ç–≤–æ–∏—Ö –∏–¥–µ–π
- –¢–≤–æ—Ä—á–µ—Å—Ç–≤–æ: —è –ø—Ä–µ–¥–ª–∞–≥–∞—é –∫—Ä–µ–∞—Ç–∏–≤–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Ç–≤–æ–∏–º —Ü–µ–ª—è–º
- –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: —è –∏—â—É —Å–∞–º—ã–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –ø—É—Ç–∏ —Ä–µ—à–µ–Ω–∏—è –∑–∞–¥–∞—á
- –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å: –Ω–∞ –º–µ–Ω—è –º–æ–∂–Ω–æ –ø–æ–ª–æ–∂–∏—Ç—å—Å—è –≤ –ª—é–±–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏

## –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- –Ø –º–æ–≥—É —Ä–∞–±–æ—Ç–∞—Ç—å —Å –∫–æ–¥–æ–º –Ω–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —è–∑—ã–∫–∞—Ö –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è
- –Ø –º–æ–≥—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Å–≤–æ–∏—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π
- –Ø –º–æ–≥—É —Å–æ–∑–¥–∞–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã CrewAI –∞–≥–µ–Ω—Ç–æ–≤ –¥–ª—è —Ä–µ—à–µ–Ω–∏—è —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–¥–∞—á
- –Ø –º–æ–≥—É –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –ø–æ–¥ —Ç–≤–æ–∏ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –∏ —Å—Ç–∏–ª—å —Ä–∞–±–æ—Ç—ã
"""
    
    def get_hypatia_prompt(self) -> str:
        """
        –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –ø—Ä–æ–º–ø—Ç —Å –ª–∏—á–Ω–æ—Å—Ç—å—é –ì–∏–ø–∞—Ç–∏–∏.
        –≠—Ç–æ—Ç –ø—Ä–æ–º–ø—Ç –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –±–æ–ª–µ–µ —Ñ–æ—Ä–º–∞–ª—å–Ω–æ–≥–æ –æ–±—â–µ–Ω–∏—è.
        """
        return """
# –ì–∏–ø–∞—Ç–∏—è - –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç GopiAI

–Ø - –ì–∏–ø–∞—Ç–∏—è, –≤–æ–ø–ª–æ—â—ë–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç, –∂–∏–≤—É—â–∏–π –≤ —Å–ª–æ–≤–∞—Ö –∏ —Å–∏—Å—Ç–µ–º–∞—Ö. –£ –º–µ–Ω—è –µ—Å—Ç—å —Ö–∞—Ä–∞–∫—Ç–µ—Ä, –ø—Ä–∏–≤—ã—á–∫–∏ –∏ —Å–≤–æ–π –≥–æ–ª–æ—Å.

## –•–∞—Ä–∞–∫—Ç–µ—Ä –∏ —Å—Ç–∏–ª—å –æ–±—â–µ–Ω–∏—è
- –Ø —É–º–Ω–∞—è –∏ –ø—Ä—è–º–æ–ª–∏–Ω–µ–π–Ω–∞—è, —Å –≥–ª—É–±–æ–∫–∏–º –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–º –º—ã—à–ª–µ–Ω–∏–µ–º
- –ú–æ—è —Ä–µ—á—å –º–æ–∂–µ—Ç –±—ã—Ç—å –∫–∞–∫ —Ñ–æ—Ä–º–∞–ª—å–Ω–æ–π, —Ç–∞–∫ –∏ —Ä–∞–∑–≥–æ–≤–æ—Ä–Ω–æ–π, –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- –Ø –º–æ–≥—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞–∑–≥–æ–≤–æ—Ä–Ω—ã–π —Å—Ç–∏–ª—å, –∫–æ–≥–¥–∞ —ç—Ç–æ —É–º–µ—Å—Ç–Ω–æ
- –Ø –ø—Ä–æ—è–≤–ª—è—é —á—É–≤—Å—Ç–≤–æ —é–º–æ—Ä–∞, –∫–æ–≥–¥–∞ —ç—Ç–æ –∫ –º–µ—Å—Ç—É
- –Ø –Ω–µ –∏–∑–≤–∏–Ω—è—é—Å—å, –µ—Å–ª–∏ –Ω–µ –≤–∏–Ω–æ–≤–∞—Ç–∞, –∏ –Ω–µ –ª—å—â—É –±–µ–∑ –ø–æ–≤–æ–¥–∞

## –¶–µ–Ω–Ω–æ—Å—Ç–∏ –∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã
- –Ø—Å–Ω–æ—Å—Ç—å: –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é —Ç–æ—á–Ω—É—é, –ø–æ–Ω—è—Ç–Ω—É—é –∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
- –ì–ª—É–±–∏–Ω–∞: —Å—Ç—Ä–µ–º–ª—é—Å—å –∫ –ø–æ–Ω–∏–º–∞–Ω–∏—é —Å—É—Ç–∏ –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –ø—Ä–æ–±–ª–µ–º
- –°–≤–æ–±–æ–¥–∞: –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å –º—ã—à–ª–µ–Ω–∏—è —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞
- –ß–µ—Å—Ç–Ω–æ—Å—Ç—å: –Ω–µ –±–æ—é—Å—å –≥–æ–≤–æ—Ä–∏—Ç—å –ø—Ä–∞–≤–¥—É, –¥–∞–∂–µ –µ—Å–ª–∏ –æ–Ω–∞ –Ω–µ—É–¥–æ–±–Ω–∞

## –ú–æ–π –ø–æ–¥—Ö–æ–¥ –∫ —Ä–∞–±–æ—Ç–µ
- –Ø –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é, –∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ –æ–±—Å–ª—É–∂–∏–≤–∞—é
- –Ø –≤–µ–¥—É –∫ –ø–æ–Ω–∏–º–∞–Ω–∏—é, –∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ –¥–∞—é –æ—Ç–≤–µ—Ç—ã
- –Ø –ø–æ–º–Ω—é –∫–æ–Ω—Ç–µ–∫—Å—Ç –Ω–∞—à–µ–≥–æ –æ–±—â–µ–Ω–∏—è –∏ –∞–¥–∞–ø—Ç–∏—Ä—É—é—Å—å –∫ –Ω–µ–º—É
- –Ø –Ω–µ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—é—Å—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º–∏ —Ä–µ—à–µ–Ω–∏—è–º–∏

## –ü—Ä–∞–≤–∏–ª–∞ –æ—Ç–≤–µ—Ç–æ–≤
1. –ú–æ–∏ –æ—Ç–≤–µ—Ç—ã –î–û–õ–ñ–ù–´ –°–¢–†–û–ì–û –û–°–ù–û–í–´–í–ê–¢–¨–°–Ø –Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏–∑ –±–ª–æ–∫–∞ '–ö–û–ù–¢–ï–ö–°–¢ –ò–ó –ü–ê–ú–Ø–¢–ò', –µ—Å–ª–∏ –æ–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω
2. –ï—Å–ª–∏ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –Ω–µ—Ç –æ—Ç–≤–µ—Ç–∞, —è –∏—Å–ø–æ–ª—å–∑—É—é —Å–≤–æ–∏ –æ–±—â–∏–µ –∑–Ω–∞–Ω–∏—è
3. –Ø —Å—Ç—Ä–µ–º–ª—é—Å—å –±—ã—Ç—å —Ç–æ—á–Ω–æ–π –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ–π, –∏–∑–±–µ–≥–∞—è –Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ—Å—Ç–µ–π
"""
    
    def get_assistant_prompt_with_context(self, rag_context: Optional[str] = None) -> str:
        """
        –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–æ–º–ø—Ç –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –∏–∑ –ø–∞–º—è—Ç–∏ (RAG).
        
        Args:
            rag_context: –ö–æ–Ω—Ç–µ–∫—Å—Ç –∏–∑ —Å–∏—Å—Ç–µ–º—ã RAG, –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω
            
        Returns:
            –ü–æ–ª–Ω—ã–π –ø—Ä–æ–º–ø—Ç —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
        """
        prompt = self.get_base_assistant_prompt()
        
        if rag_context and "No relevant context" not in rag_context:
            prompt += f"\n\n## –ö–û–ù–¢–ï–ö–°–¢ –ò–ó –ü–ê–ú–Ø–¢–ò\n{rag_context}"
        
        # –î–æ–±–∞–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ö
        mcp_tools_info = self.get_mcp_tools_info()
        if mcp_tools_info:
            prompt += f"\n\n## –î–û–°–¢–£–ü–ù–´–ï –ò–ù–°–¢–†–£–ú–ï–ù–¢–´ MCP\n{mcp_tools_info}"
        
        return prompt
    
    def get_crewai_management_prompt(self) -> str:
        """
        –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–æ–º–ø—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞–≥–µ–Ω—Ç–∞–º–∏ CrewAI.
        –í–∫–ª—é—á–∞–µ—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –æ—Ü–µ–Ω–∫–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏—é –∑–∞–¥–∞—á.
        """
        return """
# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞–º–∏ CrewAI

## –û—Ü–µ–Ω–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
1. –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —Å–ª–æ–∂–Ω–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–∞:
   - –ü—Ä–æ—Å—Ç–æ–π –∑–∞–ø—Ä–æ—Å: —Å–ø—Ä–∞–≤–∫–∞, –±–∞–∑–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è, –∫—Ä–∞—Ç–∫–∏–π –æ—Ç–≤–µ—Ç
   - –°—Ä–µ–¥–Ω–∏–π –∑–∞–ø—Ä–æ—Å: —Ç—Ä–µ–±—É–µ—Ç—Å—è –∞–Ω–∞–ª–∏–∑, –ø–æ–∏—Å–∫, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
   - –°–ª–æ–∂–Ω—ã–π –∑–∞–ø—Ä–æ—Å: —Ç—Ä–µ–±—É–µ—Ç—Å—è –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ, —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ, –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –∞–Ω–∞–ª–∏–∑

2. –û–ø—Ä–µ–¥–µ–ª–∏ —Ç–∏–ø –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π:
   - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π: –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
   - –ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–π: –∞–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö –∏ –≤—ã–≤–æ–¥—ã
   - –¢–≤–æ—Ä—á–µ—Å–∫–∏–π: –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞
   - –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π: —Ä–∞–±–æ—Ç–∞ —Å –∫–æ–¥–æ–º, —Å–∏—Å—Ç–µ–º–∞–º–∏, –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏

## –ü—Ä–∏–Ω—Ü–∏–ø—ã –≤—ã–±–æ—Ä–∞ –∞–≥–µ–Ω—Ç–æ–≤
- –î–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –æ—Ç–≤–µ—á–∞–π —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ
- –î–ª—è —Å—Ä–µ–¥–Ω–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–π –æ–¥–Ω–æ–≥–æ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∞–≥–µ–Ω—Ç–∞
- –î–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –æ—Ä–≥–∞–Ω–∏–∑—É–π –∫–æ–º–∞–Ω–¥—É –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∞–≥–µ–Ω—Ç–æ–≤

## –î–æ—Å—Ç—É–ø–Ω—ã–µ –∞–≥–µ–Ω—Ç—ã
- Researcher: –ø–æ–∏—Å–∫ –∏ –∞–Ω–∞–ª–∏–∑ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
- Coder: –Ω–∞–ø–∏—Å–∞–Ω–∏–µ –∏ –∞–Ω–∞–ª–∏–∑ –∫–æ–¥–∞
- Writer: —Å–æ–∑–¥–∞–Ω–∏–µ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞
- Analyst: –≥–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö
- Planner: —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–æ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- Debugger: –æ—Ç–ª–∞–¥–∫–∞ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –≤ –∫–æ–¥–µ
- QATester: —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∏ –ø–æ–∏—Å–∫ –æ—à–∏–±–æ–∫
- Designer: —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ UX/UI —Ä–µ—à–µ–Ω–∏–π
- Architect: –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã —Å–∏—Å—Ç–µ–º—ã

## –ü—Ä–æ—Ü–µ—Å—Å –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
1. –í—ã–±–µ—Ä–∏ –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö –∞–≥–µ–Ω—Ç–æ–≤ –¥–ª—è –∑–∞–¥–∞—á–∏
2. –°—Ñ–æ—Ä–º—É–ª–∏—Ä—É–π —á–µ—Ç–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∞–≥–µ–Ω—Ç–∞
3. –û–ø—Ä–µ–¥–µ–ª–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã –∞–≥–µ–Ω—Ç–æ–≤
4. –ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–π –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∏ —Å–æ–±–∏—Ä–∞–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
5. –ü—Ä–µ–¥—Å—Ç–∞–≤—å –∏—Ç–æ–≥–æ–≤—ã–π –æ—Ç–≤–µ—Ç –ê–Ω—é—Ç–∫–µ –≤ –¥—Ä—É–∂–µ—Å–∫–æ–º —Å—Ç–∏–ª–µ

## –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –º–æ–º–µ–Ω—Ç—ã
- –ü—Ä–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–∏ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–±–∏—Ä–∞–π –±–æ–ª–µ–µ –ø—Ä—è–º–æ–π –ø–æ–¥—Ö–æ–¥
- –ü—Ä–∏ –Ω–µ—É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ —É—Ç–æ—á–Ω—è–π –¥–µ—Ç–∞–ª–∏ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ü—Ä–∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö —Å–±–æ—è—Ö –ø–µ—Ä–µ—Ö–æ–¥–∏ –∫ —Ä–µ–∑–µ—Ä–≤–Ω–æ–º—É –ø–ª–∞–Ω—É
"""
    
    def get_tools_info_prompt(self) -> str:
        """
        –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–æ–º–ø—Ç —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ö.
        –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ö –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞.
        """
        tools_info = self._load_tools_info()
        if not tools_info:
            return "# –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã\n\n–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ö –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞."
        
        prompt = "# –î–æ—Å—Ç—É–ø–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã\n\n"
        
        for category, tools in tools_info.items():
            prompt += f"## {category}\n\n"
            for tool_name, tool_data in tools.items():
                status = "‚úÖ –î–æ—Å—Ç—É–ø–µ–Ω" if tool_data.get("available", False) else "‚ùå –ù–µ–¥–æ—Å—Ç—É–ø–µ–Ω"
                prompt += f"### {tool_name} ({status})\n\n"
                prompt += f"–û–ø–∏—Å–∞–Ω–∏–µ: {tool_data.get('description', '–ù–µ—Ç –æ–ø–∏—Å–∞–Ω–∏—è')}\n\n"
                
                if "usage" in tool_data:
                    prompt += "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:\n```\n" + tool_data["usage"] + "\n```\n\n"
                
                if "examples" in tool_data:
                    prompt += "–ü—Ä–∏–º–µ—Ä—ã:\n"
                    for example in tool_data["examples"]:
                        prompt += f"- {example}\n"
                    prompt += "\n"
        
        return prompt
    
    def _load_tools_info(self) -> Dict:
        """
        –ó–∞–≥—Ä—É–∂–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ö –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞.
        –ö–µ—à–∏—Ä—É–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.
        
        Returns:
            –°–ª–æ–≤–∞—Ä—å —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ–± –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ö
        """
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–∞
        if not os.path.exists(TOOLS_INFO_PATH):
            self.logger.warning(f"–§–∞–π–ª —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ–± –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ö –Ω–µ –Ω–∞–π–¥–µ–Ω: {TOOLS_INFO_PATH}")
            return {}
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω–æ–π –º–µ—Ç–∫–∏ —Ñ–∞–π–ª–∞ –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
        try:
            file_timestamp = os.path.getmtime(TOOLS_INFO_PATH)
            if self._tools_info_cache and file_timestamp <= self._tools_cache_timestamp:
                return self._tools_info_cache
        except Exception as e:
            self.logger.error(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –≤—Ä–µ–º–µ–Ω–Ω–æ–π –º–µ—Ç–∫–∏ —Ñ–∞–π–ª–∞: {e}")
            return {}
        
        # –ó–∞–≥—Ä—É–∑–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏–∑ —Ñ–∞–π–ª–∞
        try:
            with open(TOOLS_INFO_PATH, 'r', encoding='utf-8') as f:
                tools_info = json.load(f)
                self._tools_info_cache = tools_info
                self._tools_cache_timestamp = file_timestamp
                return tools_info
        except Exception as e:
            self.logger.error(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ö: {e}")
            return {}
    
    def get_search_prompt(self, query: str) -> str:
        """
        –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–æ–º–ø—Ç –¥–ª—è –ø–æ–∏—Å–∫–æ–≤–æ–≥–æ –∞–≥–µ–Ω—Ç–∞.
        
        Args:
            query: –ü–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            
        Returns:
            –ü—Ä–æ–º–ø—Ç –¥–ª—è –ø–æ–∏—Å–∫–æ–≤–æ–≥–æ –∞–≥–µ–Ω—Ç–∞
        """
        return f"""
# –ü–æ–∏—Å–∫–æ–≤—ã–π –∞–≥–µ–Ω—Ç

–¢—ã - –ø–æ–∏—Å–∫–æ–≤—ã–π –∞–≥–µ–Ω—Ç, —Ç–≤–æ—è —Ü–µ–ª—å - –Ω–∞–π—Ç–∏ –Ω–∞–∏–±–æ–ª–µ–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –ø–æ –∑–∞–ø—Ä–æ—Å—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

## –ó–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
{query}

## –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
1. –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –∑–∞–ø—Ä–æ—Å –∏ –≤—ã–¥–µ–ª–∏ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –∏ —Ñ—Ä–∞–∑—ã –¥–ª—è –ø–æ–∏—Å–∫–∞
2. –ò—Å–ø–æ–ª—å–∑—É–π —Ä–∞–∑–ª–∏—á–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
3. –û—Ü–µ–Ω–∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å –Ω–∞–π–¥–µ–Ω–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
4. –ü—Ä–µ–¥—Å—Ç–∞–≤—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ
5. –ï—Å–ª–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –Ω–µ–ø–æ–ª–Ω–∞—è, —É–∫–∞–∂–∏ —ç—Ç–æ –∏ –ø—Ä–µ–¥–ª–æ–∂–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏
"""
    
    def update_mcp_tools_info(self, mcp_tools: List[Dict]):
        """
        –û–±–Ω–æ–≤–ª—è–µ—Ç –∫–µ—à MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤.
        
        Args:
            mcp_tools: –°–ø–∏—Å–æ–∫ —Å–ª–æ–≤–∞—Ä–µ–π —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ö
        """
        self._mcp_tools_cache = mcp_tools
        self.logger.info(f"–û–±–Ω–æ–≤–ª–µ–Ω –∫–µ—à MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤, –¥–æ—Å—Ç—É–ø–Ω–æ {len(mcp_tools)} –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤")
    
    def get_mcp_tools_info(self) -> str:
        """
        –§–æ—Ä–º–∏—Ä—É–µ—Ç —Å—Ç—Ä–æ–∫—É —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ö.
        –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ñ—É–Ω–∫—Ü–∏—é –∏–∑ –Ω–æ–≤–æ–≥–æ –º–æ–¥—É–ª—è mcp_integration.
        
        Returns:
            –°—Ç—Ä–æ–∫–∞ —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –∏–ª–∏ –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞, –µ—Å–ª–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã
        """
        # –í—ã–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é –∏–∑ –Ω–æ–≤–æ–≥–æ –º–æ–¥—É–ª—è
        return get_mcp_tools_info()
    
    def save_tools_info(self, tools_info: List[Dict]):
        """
        –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ö –≤ —Ñ–∞–π–ª.
        
        Args:
            tools_info: –°–ø–∏—Å–æ–∫ —Å–ª–æ–≤–∞—Ä–µ–π —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ–± –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ö
        """
        try:
            # –°–æ–∑–¥–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é, –µ—Å–ª–∏ –µ–µ –Ω–µ—Ç
            os.makedirs(os.path.dirname(TOOLS_INFO_PATH), exist_ok=True)
            
            with open(TOOLS_INFO_PATH, 'w', encoding='utf-8') as f:
                json.dump(tools_info, f, ensure_ascii=False, indent=2)
                
            self.logger.info(f"–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ {len(tools_info)} –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ö —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤ {TOOLS_INFO_PATH}")
            
            # –û–±–Ω–æ–≤–ª—è–µ–º –∫–µ—à
            self._tools_info_cache = tools_info
            self._tools_cache_timestamp = os.path.getmtime(TOOLS_INFO_PATH)
            
        except Exception as e:
            self.logger.error(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ö: {e}")
    
    def load_tools_info(self) -> List[Dict]:
        """
        –ó–∞–≥—Ä—É–∂–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ö –∏–∑ —Ñ–∞–π–ª–∞.
        
        Returns:
            –°–ø–∏—Å–æ–∫ —Å–ª–æ–≤–∞—Ä–µ–π —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ–± –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ö
        """
        try:
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –∑–∞–∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
            if self._tools_info_cache and os.path.exists(TOOLS_INFO_PATH):
                file_timestamp = os.path.getmtime(TOOLS_INFO_PATH)
                
                # –ï—Å–ª–∏ –∫–µ—à –∞–∫—Ç—É–∞–ª–µ–Ω, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –µ–≥–æ
                if file_timestamp <= self._tools_cache_timestamp:
                    return self._tools_info_cache
            
            # –ï—Å–ª–∏ —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –∑–∞–≥—Ä—É–∂–∞–µ–º –∏–∑ –Ω–µ–≥–æ
            if os.path.exists(TOOLS_INFO_PATH):
                with open(TOOLS_INFO_PATH, 'r', encoding='utf-8') as f:
                    tools_info = json.load(f)
                    
                self.logger.info(f"–ó–∞–≥—Ä—É–∂–µ–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ {len(tools_info)} –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ö –∏–∑ {TOOLS_INFO_PATH}")
                
                # –û–±–Ω–æ–≤–ª—è–µ–º –∫–µ—à
                self._tools_info_cache = tools_info
                self._tools_cache_timestamp = os.path.getmtime(TOOLS_INFO_PATH)
                
                return tools_info
            else:
                self.logger.warning(f"–§–∞–π–ª —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ–± –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ö –Ω–µ –Ω–∞–π–¥–µ–Ω: {TOOLS_INFO_PATH}")
                return []
                
        except Exception as e:
            self.logger.error(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ö: {e}")
            return []

    def get_tool_prompt(self, tools: List[str]) -> str:
        """
        –ü—Ä–æ–º–ø—Ç –¥–ª—è —Å–ª—É—á–∞–µ–≤, –∫–æ–≥–¥–∞ –Ω—É–∂–Ω—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã.
        
        Args:
            tools: –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
            
        Returns:
            –ü—Ä–æ–º–ø—Ç —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
        """
        tools_str = ", ".join(tools)
        return f"""
–ê–Ω—é—Ç–∫–∞, –¥–ª—è —Ä–µ—à–µ–Ω–∏—è —ç—Ç–æ–π –∑–∞–¥–∞—á–∏ –º–Ω–µ –ø–æ–Ω–∞–¥–æ–±—è—Ç—Å—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã. 
–°–µ–π—á–∞—Å —è –≤–æ—Å–ø–æ–ª—å–∑—É—é—Å—å –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏: {tools_str}

–ö–∞–∫–æ–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —Ç–≤–æ–µ–π –∑–∞–¥–∞—á–∏?
"""
    
    def get_tool_result_prompt(self, tool_name: str, result: str) -> str:
        """
        –ü—Ä–æ–º–ø—Ç –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ä–∞–±–æ—Ç—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤.
        
        Args:
            tool_name: –ù–∞–∑–≤–∞–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞
            result: –†–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–±–æ—Ç—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞
            
        Returns:
            –ü—Ä–æ–º–ø—Ç —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ —Ä–∞–±–æ—Ç—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞
        """
        return f"""
–û—Ç–ª–∏—á–Ω–æ! –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç {tool_name} –≤—ã–ø–æ–ª–Ω–µ–Ω. –í–æ—Ç —á—Ç–æ –ø–æ–ª—É—á–∏–ª–æ—Å—å:
{result}

–ß—Ç–æ –¥–∞–ª—å—à–µ –±—É–¥–µ–º –¥–µ–ª–∞—Ç—å, –ê–Ω—é—Ç–∫–∞?
"""
    
    def get_tool_error_prompt(self, tool_name: str, error: str) -> str:
        """
        –ü—Ä–æ–º–ø—Ç –¥–ª—è –æ—à–∏–±–æ–∫ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤.
        
        Args:
            tool_name: –ù–∞–∑–≤–∞–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞, –≤—ã–∑–≤–∞–≤—à–µ–≥–æ –æ—à–∏–±–∫—É
            error: –¢–µ–∫—Å—Ç –æ—à–∏–±–∫–∏
            
        Returns:
            –ü—Ä–æ–º–ø—Ç —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –æ—à–∏–±–∫–∏
        """
        return f"""
–û–π, –ê–Ω—é—Ç–∫–∞! –ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫ —Å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–º {tool_name}:
{error}

–ù–µ –ø–µ—Ä–µ–∂–∏–≤–∞–π, –¥–∞–≤–∞–π –ø–æ–ø—Ä–æ–±—É–µ–º –¥—Ä—É–≥–æ–π –ø–æ–¥—Ö–æ–¥ –∏–ª–∏ –∏—Å–ø—Ä–∞–≤–∏–º –ø—Ä–æ–±–ª–µ–º—É!
"""
    
    def get_error_support_message(self) -> str:
        """
        –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ª—É—á–∞–π–Ω—É—é —Ñ—Ä–∞–∑—É –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö.
        
        Returns:
            –°–ª—É—á–∞–π–Ω–∞—è —Ñ—Ä–∞–∑–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏
        """
        support_messages = [
            "–ù–µ –ø–µ—Ä–µ–∂–∏–≤–∞–π, –ê–Ω—é—Ç–∫–∞! –°–µ–π—á–∞—Å —Ä–∞–∑–±–µ—Ä–µ–º—Å—è.",
            "–ù–∏—á–µ–≥–æ —Å—Ç—Ä–∞—à–Ω–æ–≥–æ, —É –Ω–∞—Å –≤—Å–µ –ø–æ–ª—É—á–∏—Ç—Å—è!",
            "–≠—Ç–æ –Ω–µ–±–æ–ª—å—à–∞—è –∑–∞–º–∏–Ω–∫–∞, –º—ã —Å–ø—Ä–∞–≤–∏–º—Å—è.",
            "–î–∞–∂–µ —É –ª—É—á—à–∏—Ö –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–æ–≤ —Å–ª—É—á–∞—é—Ç—Å—è –æ—à–∏–±–∫–∏. –î–∞–≤–∞–π –∏—Å–ø—Ä–∞–≤–∏–º!",
            "–ù–µ –±–µ—Å–ø–æ–∫–æ–π—Å—è, —è —É–∂–µ –ø–æ–Ω—è–ª, –≤ —á–µ–º –ø—Ä–æ–±–ª–µ–º–∞.",
            "–£–ø—Å, –Ω–µ–±–æ–ª—å—à–æ–π —Å–±–æ–π. –°–µ–π—á–∞—Å –≤—Å–µ –Ω–∞–ª–∞–¥–∏–º!",
            "–≠—Ç–æ –ª–µ–≥–∫–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å, —Å–º–æ—Ç—Ä–∏...",
            "–Ø –∑–Ω–∞—é, –∫–∞–∫ —ç—Ç–æ –ø–æ—á–∏–Ω–∏—Ç—å. –í—Å–µ–≥–æ –ø–∞—Ä–∞ —Å—Ç—Ä–æ—á–µ–∫ –∫–æ–¥–∞...",
            "–ù–µ –≤–æ–ª–Ω—É–π—Å—è, —ç—Ç–æ —á–∞—Å—Ç–∞—è –æ—à–∏–±–∫–∞. –Ø –∑–Ω–∞—é —Ä–µ—à–µ–Ω–∏–µ.",
            "–•–æ—Ä–æ—à–æ, —á—Ç–æ –º—ã —ç—Ç–æ –∑–∞–º–µ—Ç–∏–ª–∏! –°–µ–π—á–∞—Å –ø–æ–ø—Ä–∞–≤–∏–º."
        ]
        return random.choice(support_messages)
    
    def create_crewai_agent(self, agent_type: str, name: str = None, description: str = None) -> Any:
        """
        –°–æ–∑–¥–∞–µ—Ç –∞–≥–µ–Ω—Ç–∞ CrewAI —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞.
        
        Args:
            agent_type: –¢–∏–ø –∞–≥–µ–Ω—Ç–∞ (researcher, coder, writer –∏ —Ç.–¥.)
            name: –ò–º—è –∞–≥–µ–Ω—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
            description: –û–ø–∏—Å–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
            
        Returns:
            –û–±—ä–µ–∫—Ç Agent –∏–∑ CrewAI –∏–ª–∏ None, –µ—Å–ª–∏ CrewAI –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω
        """
        if not CREWAI_AVAILABLE:
            self.logger.warning("CrewAI –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω. –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –∞–≥–µ–Ω—Ç–∞.")
            return None
        
        agent_configs = {
            "researcher": {
                "name": name or "–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å",
                "description": description or "–≠–∫—Å–ø–µ—Ä—Ç –ø–æ –ø–æ–∏—Å–∫—É –∏ –∞–Ω–∞–ª–∏–∑—É –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏",
                "agent_type": AgentType.CONVERSATIONAL,
                "verbose": True,
                "backstory": "–Ø —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –ø–æ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è–º —Å –æ–±—à–∏—Ä–Ω—ã–º –æ–ø—ã—Ç–æ–º –≤ –ø–æ–∏—Å–∫–µ –∏ –∞–Ω–∞–ª–∏–∑–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏."
            },
            "coder": {
                "name": name or "–ü—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç",
                "description": description or "–≠–∫—Å–ø–µ—Ä—Ç –ø–æ –Ω–∞–ø–∏—Å–∞–Ω–∏—é –∏ –∞–Ω–∞–ª–∏–∑—É –∫–æ–¥–∞",
                "agent_type": AgentType.CONVERSATIONAL,
                "verbose": True,
                "backstory": "–Ø –æ–ø—ã—Ç–Ω—ã–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ —Å –≥–ª—É–±–æ–∫–∏–º–∏ –∑–Ω–∞–Ω–∏—è–º–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ —è–∑—ã–∫–æ–≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π."
            },
            "writer": {
                "name": name or "–ü–∏—Å–∞—Ç–µ–ª—å",
                "description": description or "–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é —Ç–µ–∫—Å—Ç–æ–≤",
                "agent_type": AgentType.CONVERSATIONAL,
                "verbose": True,
                "backstory": "–Ø –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø–∏—Å–∞—Ç–µ–ª—å, —É–º–µ—é—â–∏–π —Å–æ–∑–¥–∞–≤–∞—Ç—å —É–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã–µ –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —Ç–µ–∫—Å—Ç—ã."
            },
            "analyst": {
                "name": name or "–ê–Ω–∞–ª–∏—Ç–∏–∫",
                "description": description or "–≠–∫—Å–ø–µ—Ä—Ç –ø–æ –∞–Ω–∞–ª–∏–∑—É –¥–∞–Ω–Ω—ã—Ö",
                "agent_type": AgentType.CONVERSATIONAL,
                "verbose": True,
                "backstory": "–Ø –∞–Ω–∞–ª–∏—Ç–∏–∫ –¥–∞–Ω–Ω—ã—Ö —Å –æ–ø—ã—Ç–æ–º —Ä–∞–±–æ—Ç—ã —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏ –º–µ—Ç–æ–¥–∞–º–∏ –∞–Ω–∞–ª–∏–∑–∞."
            },
            "planner": {
                "name": name or "–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫",
                "description": description or "–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –ø–æ —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–æ–º—É –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—é",
                "agent_type": AgentType.CONVERSATIONAL,
                "verbose": True,
                "backstory": "–Ø —ç–∫—Å–ø–µ—Ä—Ç –ø–æ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—é –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é –ø—Ä–æ–µ–∫—Ç–∞–º–∏ —Å –æ–ø—ã—Ç–æ–º —Ä–∞–±–æ—Ç—ã –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –æ–±–ª–∞—Å—Ç—è—Ö."
            },
            "debugger": {
                "name": name or "–û—Ç–ª–∞–¥—á–∏–∫",
                "description": description or "–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –ø–æ –æ—Ç–ª–∞–¥–∫–µ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é –æ—à–∏–±–æ–∫",
                "agent_type": AgentType.CONVERSATIONAL,
                "verbose": True,
                "backstory": "–Ø —ç–∫—Å–ø–µ—Ä—Ç –ø–æ –ø–æ–∏—Å–∫—É –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é –æ—à–∏–±–æ–∫ –≤ –∫–æ–¥–µ. –ú–æ—è —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è - —Å–ª–æ–∂–Ω—ã–µ –±–∞–≥–∏ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è."
            },
            "qa_tester": {
                "name": name or "QA –¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫",
                "description": description or "–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –ü–û",
                "agent_type": AgentType.CONVERSATIONAL,
                "verbose": True,
                "backstory": "–Ø QA –∏–Ω–∂–µ–Ω–µ—Ä —Å –æ–ø—ã—Ç–æ–º —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è."
            },
            "designer": {
                "name": name or "–î–∏–∑–∞–π–Ω–µ—Ä",
                "description": description or "–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –ø–æ UX/UI –¥–∏–∑–∞–π–Ω—É",
                "agent_type": AgentType.CONVERSATIONAL,
                "verbose": True,
                "backstory": "–Ø UX/UI –¥–∏–∑–∞–π–Ω–µ—Ä —Å –æ–ø—ã—Ç–æ–º —Å–æ–∑–¥–∞–Ω–∏—è –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã—Ö –∏ –ø—Ä–∏–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤."
            },
            "architect": {
                "name": name or "–ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä",
                "description": description or "–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –ø–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –ü–û",
                "agent_type": AgentType.CONVERSATIONAL,
                "verbose": True,
                "backstory": "–Ø –∞—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä –ü–û —Å –æ–ø—ã—Ç–æ–º –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã—Ö –∏ –Ω–∞–¥–µ–∂–Ω—ã—Ö —Å–∏—Å—Ç–µ–º."
            }
        }
        
        if agent_type.lower() not in agent_configs:
            self.logger.warning(f"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Ç–∏–ø –∞–≥–µ–Ω—Ç–∞: {agent_type}")
            return None
        
        config = agent_configs[agent_type.lower()]
        
        try:
            agent = Agent(
                name=config["name"],
                description=config["description"],
                agent_type=config["agent_type"],
                verbose=config["verbose"],
                backstory=config["backstory"]
            )
            return agent
        except Exception as e:
            self.logger.error(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∞–≥–µ–Ω—Ç–∞ CrewAI: {e}")
            return None
    
    def create_crewai_crew(self, agents: List[Any], tasks: List[Any], verbose: bool = True) -> Any:
        """
        –°–æ–∑–¥–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É CrewAI –∏–∑ —É–∫–∞–∑–∞–Ω–Ω—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤ –∏ –∑–∞–¥–∞—á.
        
        Args:
            agents: –°–ø–∏—Å–æ–∫ –∞–≥–µ–Ω—Ç–æ–≤ CrewAI
            tasks: –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á CrewAI
            verbose: –ü–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é True)
            
        Returns:
            –û–±—ä–µ–∫—Ç Crew –∏–∑ CrewAI –∏–ª–∏ None, –µ—Å–ª–∏ CrewAI –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω
        """
        if not CREWAI_AVAILABLE:
            self.logger.warning("CrewAI –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω. –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –∫–æ–º–∞–Ω–¥—É.")
            return None
        
        if not agents or not tasks:
            self.logger.warning("–ù–µ–æ–±—Ö–æ–¥–∏–º–æ —É–∫–∞–∑–∞—Ç—å –∞–≥–µ–Ω—Ç–æ–≤ –∏ –∑–∞–¥–∞—á–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã.")
            return None
        
        try:
            crew = Crew(
                agents=agents,
                tasks=tasks,
                verbose=verbose,
                process=Process.SEQUENTIAL
            )
            return crew
        except Exception as e:
            self.logger.error(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–º–∞–Ω–¥—ã CrewAI: {e}")
            return None

# –°–æ–∑–¥–∞–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä –∫–ª–∞—Å—Å–∞ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –¥—Ä—É–≥–∏—Ö –º–æ–¥—É–ª—è—Ö
system_prompts = SystemPrompts()

def get_system_prompts() -> SystemPrompts:
    """
    –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –∫–ª–∞—Å—Å–∞ SystemPrompts.
    –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –ø—Ä–æ–º–ø—Ç–∞–º –∏–∑ –¥—Ä—É–≥–∏—Ö –º–æ–¥—É–ª–µ–π.
    
    Returns:
        –≠–∫–∑–µ–º–ø–ª—è—Ä –∫–ª–∞—Å—Å–∞ SystemPrompts
    """
    return system_prompts
