=== LLM PROVIDER: Google Gemini ===
TIME: 20250623_151031_864756
LLM CONFIG: {'model': 'gemini/gemini-1.5-flash', 'api_key': 'AIza_your_google_api_key_here', 'temperature': 0.7, 'max_tokens': 2000}
PROMPT: Скажи 'ОК'
EXCEPTION: litellm.AuthenticationError: geminiException - {
  "error": {
    "code": 400,
    "message": "API key not valid. Please pass a valid API key.",
    "status": "INVALID_ARGUMENT",
    "details": [
      {
        "@type": "type.googleapis.com/google.rpc.ErrorInfo",
        "reason": "API_KEY_INVALID",
        "domain": "googleapis.com",
        "metadata": {
          "service": "generativelanguage.googleapis.com"
        }
      },
      {
        "@type": "type.googleapis.com/google.rpc.LocalizedMessage",
        "locale": "en-US",
        "message": "API key not valid. Please pass a valid API key."
      }
    ]
  }
}

Traceback (most recent call last):
  File "C:\Users\crazy\GOPI_AI_MODULES\GopiAI-CrewAI\crewai_env\Lib\site-packages\litellm\llms\vertex_ai\gemini\vertex_and_google_ai_studio_gemini.py", line 1698, in completion
    response = client.post(url=url, headers=headers, json=data)  # type: ignore
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\crazy\GOPI_AI_MODULES\GopiAI-CrewAI\crewai_env\Lib\site-packages\litellm\llms\custom_httpx\http_handler.py", line 704, in post
    raise e
  File "C:\Users\crazy\GOPI_AI_MODULES\GopiAI-CrewAI\crewai_env\Lib\site-packages\litellm\llms\custom_httpx\http_handler.py", line 686, in post
    response.raise_for_status()
  File "C:\Users\crazy\GOPI_AI_MODULES\GopiAI-CrewAI\crewai_env\Lib\site-packages\httpx\_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=AIza_your_google_api_key_here'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\crazy\GOPI_AI_MODULES\GopiAI-CrewAI\crewai_env\Lib\site-packages\litellm\main.py", line 2446, in completion
    response = vertex_chat_completion.completion(  # type: ignore
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\crazy\GOPI_AI_MODULES\GopiAI-CrewAI\crewai_env\Lib\site-packages\litellm\llms\vertex_ai\gemini\vertex_and_google_ai_studio_gemini.py", line 1702, in completion
    raise VertexAIError(
litellm.llms.vertex_ai.common_utils.VertexAIError: {
  "error": {
    "code": 400,
    "message": "API key not valid. Please pass a valid API key.",
    "status": "INVALID_ARGUMENT",
    "details": [
      {
        "@type": "type.googleapis.com/google.rpc.ErrorInfo",
        "reason": "API_KEY_INVALID",
        "domain": "googleapis.com",
        "metadata": {
          "service": "generativelanguage.googleapis.com"
        }
      },
      {
        "@type": "type.googleapis.com/google.rpc.LocalizedMessage",
        "locale": "en-US",
        "message": "API key not valid. Please pass a valid API key."
      }
    ]
  }
}


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\crazy\GOPI_AI_MODULES\GopiAI-CrewAI\main.py", line 194, in create_llm_with_fallback
    test_response = llm.call(test_prompt)
                    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\crazy\GOPI_AI_MODULES\GopiAI-CrewAI\crewai_env\Lib\site-packages\crewai\llm.py", line 956, in call
    return self._handle_non_streaming_response(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\crazy\GOPI_AI_MODULES\GopiAI-CrewAI\crewai_env\Lib\site-packages\crewai\llm.py", line 768, in _handle_non_streaming_response
    response = litellm.completion(**params)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\crazy\GOPI_AI_MODULES\GopiAI-CrewAI\crewai_env\Lib\site-packages\litellm\utils.py", line 1283, in wrapper
    raise e
  File "C:\Users\crazy\GOPI_AI_MODULES\GopiAI-CrewAI\crewai_env\Lib\site-packages\litellm\utils.py", line 1161, in wrapper
    result = original_function(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\crazy\GOPI_AI_MODULES\GopiAI-CrewAI\crewai_env\Lib\site-packages\litellm\main.py", line 3241, in completion
    raise exception_type(
          ^^^^^^^^^^^^^^^
  File "C:\Users\crazy\GOPI_AI_MODULES\GopiAI-CrewAI\crewai_env\Lib\site-packages\litellm\litellm_core_utils\exception_mapping_utils.py", line 2239, in exception_type
    raise e
  File "C:\Users\crazy\GOPI_AI_MODULES\GopiAI-CrewAI\crewai_env\Lib\site-packages\litellm\litellm_core_utils\exception_mapping_utils.py", line 1164, in exception_type
    raise AuthenticationError(
litellm.exceptions.AuthenticationError: litellm.AuthenticationError: geminiException - {
  "error": {
    "code": 400,
    "message": "API key not valid. Please pass a valid API key.",
    "status": "INVALID_ARGUMENT",
    "details": [
      {
        "@type": "type.googleapis.com/google.rpc.ErrorInfo",
        "reason": "API_KEY_INVALID",
        "domain": "googleapis.com",
        "metadata": {
          "service": "generativelanguage.googleapis.com"
        }
      },
      {
        "@type": "type.googleapis.com/google.rpc.LocalizedMessage",
        "locale": "en-US",
        "message": "API key not valid. Please pass a valid API key."
      }
    ]
  }
}

