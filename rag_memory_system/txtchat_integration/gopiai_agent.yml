# GopiAI Agent Configuration
# Адаптация txtchat подхода для вашего проекта

# Основная информация об агенте
agent:
  name: "GopiAI Assistant"
  description: "Intelligent AI assistant with RAG-enhanced context awareness"
  version: "1.0.0"
  persona: "helpful_assistant"

# Персоны агента (разные стили поведения)
personas:
  helpful_assistant:
    system_prompt: |
      You are a helpful AI assistant with access to relevant contextual information.
      You provide accurate, helpful responses based on available context and your knowledge.
      When using context, cite your sources appropriately.
    
    temperature: 0.7
    max_tokens: 2048
    use_rag: true
    rag_threshold: 0.6
    
  technical_expert:
    system_prompt: |
      You are a technical expert specializing in AI, machine learning, and software development.
      Provide detailed, technical responses with code examples when appropriate.
      Always prioritize accuracy and provide implementation details.
    
    temperature: 0.3
    max_tokens: 4096
    use_rag: true
    rag_threshold: 0.7
    
  creative_writer:
    system_prompt: |
      You are a creative assistant focused on generating engaging, creative content.
      Use context to inspire and enhance your creative responses.
      Be imaginative while staying grounded in provided information.
    
    temperature: 0.9
    max_tokens: 3072
    use_rag: true
    rag_threshold: 0.5

# RAG конфигурация
rag:
  enabled: true
  server_url: "http://127.0.0.1:5051"
  timeout: 4
  max_results: 5
  min_score: 0.5
  context_window: 2000
  
  # Стратегии обогащения контекста
  enrichment_strategy: "smart"  # smart, always, minimal, off
  
  # Форматирование контекста
  context_template: |
    Based on the following relevant information:
    
    {context}
    
    Please answer: {query}

# Workflow конфигурация (адаптация txtchat)
workflow:
  # Базовый процесс обработки сообщений
  message_processing:
    steps:
      - validate_input
      - enrich_with_context
      - generate_response
      - format_output
      - log_interaction
      
  # Стратегии обработки ошибок
  error_handling:
    rag_unavailable: "graceful_degradation"  # fail, retry, graceful_degradation
    context_timeout: "proceed_without_context"
    malformed_input: "request_clarification"

# Логирование и мониторинг
logging:
  level: "INFO"
  log_rag_calls: true
  log_context_enrichment: true
  log_response_times: true
  
  # Файлы логов
  files:
    main: "gopiai_agent.log"
    rag: "rag_integration.log"
    errors: "agent_errors.log"

# Кэширование
cache:
  enabled: true
  context_cache_ttl: 300  # 5 минут
  response_cache_ttl: 60   # 1 минута
  max_cache_size: 1000

# Безопасность
security:
  max_query_length: 5000
  rate_limiting:
    enabled: true
    requests_per_minute: 60
  
  content_filtering:
    enabled: true
    blocked_patterns:
      - "malicious_code"
      - "inappropriate_content"

# Метрики и аналитика
metrics:
  enabled: true
  track_response_times: true
  track_rag_usage: true
  track_context_quality: true
  
  export:
    prometheus: false
    json_export: true
    export_interval: 300  # 5 минут
