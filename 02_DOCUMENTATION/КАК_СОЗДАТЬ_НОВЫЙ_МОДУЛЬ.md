# Как создать новый модуль для GopiAI

Этот документ содержит пошаговую инструкцию по созданию нового модуля для проекта GopiAI.

## Шаг 1: Создание структуры модуля

1. **Создайте папку для модуля**:
   ```
   mkdir gopiai-mymodule
   ```

2. **Создайте структуру пакета**:
   ```
   mkdir -p gopiai-mymodule/gopiai/mymodule
   mkdir -p gopiai-mymodule/tests
   mkdir -p gopiai-mymodule/examples
   ```

3. **Создайте файл `gopiai/__init__.py` для namespace package**:
   ```python
   __path__ = __import__('pkgutil').extend_path(__path__, __name__)
   ```

4. **Создайте файл `gopiai/mymodule/__init__.py`**:
   ```python
   """
   Мой модуль для GopiAI.

   Описание модуля и его функциональности.
   """

   __version__ = "0.1.0"
   ```

5. **Создайте файл `pyproject.toml`**:
   ```toml
   [build-system]
   requires = ["setuptools>=42", "wheel"]
   build-backend = "setuptools.build_meta"

   [project]
   name = "gopiai-mymodule"
   version = "0.1.0"
   description = "Мой модуль для GopiAI"
   requires-python = ">=3.8"
   dependencies = [
       "PySide6>=6.5.0",
       "gopiai-core>=0.1.0",
   ]

   [tool.setuptools]
   packages = ["gopiai.mymodule"]
   ```

6. **Создайте файл `README.md`**:
   ```markdown
   # GopiAI MyModule

   Это мой модуль для приложения GopiAI.

   ## Структура модуля

   ```
   gopiai-mymodule/
   ├── gopiai/
   │   ├── __init__.py  # namespace package
   │   └── mymodule/
   │       ├── __init__.py
   │       └── ...
   ├── tests/
   ├── examples/
   └── pyproject.toml
   ```

   ## Разработка

   ...

   ## Тестирование

   ...

   ## Запуск примеров

   ...
   ```

## Шаг 2: Добавление функциональности

1. **Создайте файл с вашей функциональностью**:
   ```python
   # gopiai/mymodule/my_component.py
   from PySide6.QtWidgets import QWidget, QVBoxLayout, QLabel

   class MyComponent(QWidget):
       def __init__(self, parent=None):
           super().__init__(parent)
           self.layout = QVBoxLayout(self)
           self.label = QLabel("Мой компонент", self)
           self.layout.addWidget(self.label)
   ```

2. **Импортируйте компонент в `gopiai/mymodule/__init__.py`**:
   ```python
   """
   Мой модуль для GopiAI.

   Описание модуля и его функциональности.
   """

   from gopiai.mymodule.my_component import MyComponent

   __version__ = "0.1.0"
   ```

## Шаг 3: Создание тестов

1. **Создайте файл с тестами**:
   ```python
   # tests/test_my_component.py
   import pytest
   from PySide6.QtWidgets import QApplication
   from gopiai.mymodule.my_component import MyComponent

   @pytest.fixture
   def app():
       """Создает экземпляр QApplication для тестов."""
       return QApplication([])

   @pytest.fixture
   def component(app):
       """Создает экземпляр MyComponent для тестов."""
       return MyComponent()

   def test_component_creation(component):
       """Тестирует создание компонента."""
       assert component is not None
       assert hasattr(component, 'label')
   ```

## Шаг 4: Создание примеров использования

1. **Создайте файл с примером использования**:
   ```python
   # examples/run_my_component.py
   import sys
   import os

   # Добавляем корневую папку проекта в PYTHONPATH
   sys.path.insert(0, os.path.abspath(os.path.join(os.path.dirname(__file__), '../..')))

   from PySide6.QtWidgets import QApplication
   from gopiai.mymodule.my_component import MyComponent

   def main():
       """Основная функция тестового приложения."""
       app = QApplication(sys.argv)
       
       # Создаем компонент
       component = MyComponent()
       component.show()
       
       sys.exit(app.exec())

   if __name__ == "__main__":
       main()
   ```

## Шаг 5: Интеграция с основным проектом

1. **Добавьте модуль в скрипт сборки**:
   ```python
   # build_project.py
   MODULES = [
       "gopiai-core",
       "gopiai-widgets",
       "gopiai-extensions",
       "gopiai-app",
       "gopiai-assets",
       "gopiai-mymodule",  # Добавьте ваш модуль
   ]
   ```

2. **Используйте ваш модуль в других модулях**:
   ```python
   from gopiai.mymodule import MyComponent
   
   component = MyComponent()
   ```

## Шаг 6: Тестирование модуля

1. **Запустите тесты**:
   ```bash
   cd gopiai-mymodule
   pytest tests/
   ```

2. **Запустите пример использования**:
   ```bash
   cd gopiai-mymodule
   python examples/run_my_component.py
   ```

3. **Соберите проект и проверьте интеграцию**:
   ```bash
   python build_project.py
   cd build
   python main.py
   ```

## Шаг 7: Документирование модуля

1. **Обновите README.md с описанием модуля**
2. **Добавьте комментарии к коду**
3. **Создайте документацию по API модуля**

## Заключение

Теперь у вас есть новый модуль для проекта GopiAI, который можно разрабатывать независимо от других модулей и интегрировать в основной проект.

Помните о следующих принципах:
- Используйте абсолютные импорты через namespace `gopiai`
- Создавайте тесты для всех компонентов
- Документируйте код и API
- Следуйте архитектуре проекта
