# Инструкция по работе с модульной структурой GopiAI

## Перемещение модулей

Вы можете переместить каждый модуль в отдельную папку для независимой разработки. Вот пошаговая инструкция:

1. **Создайте отдельные папки для каждого модуля**:
   ```
   C:\Users\username\GopiAI-Core
   C:\Users\username\GopiAI-Widgets
   C:\Users\username\GopiAI-Extensions
   C:\Users\username\GopiAI-App
   C:\Users\username\GopiAI-Assets
   ```

2. **Скопируйте содержимое каждого модуля в соответствующую папку**:
   - Скопируйте содержимое `gopiai-core` в `C:\Users\username\GopiAI-Core`
   - Скопируйте содержимое `gopiai-widgets` в `C:\Users\username\GopiAI-Widgets`
   - Скопируйте содержимое `gopiai-extensions` в `C:\Users\username\GopiAI-Extensions`
   - Скопируйте содержимое `gopiai-app` в `C:\Users\username\GopiAI-App`
   - Скопируйте содержимое `gopiai-assets` в `C:\Users\username\GopiAI-Assets`

3. **Скопируйте скрипты сборки и тестирования**:
   - Скопируйте `build_project.py` и `run_tests.py` в каждую папку

## Разработка модулей

Каждый модуль содержит README.md с инструкциями по разработке. Вот общие принципы:

1. **Используйте абсолютные импорты через namespace `gopiai`**:
   ```python
   from gopiai.core.minimal_app import FramelessMainWindow
   from gopiai.widgets.text_editor import TextEditorWidget
   ```

2. **Создавайте тесты для всех компонентов**:
   ```python
   # tests/test_my_component.py
   import pytest
   from gopiai.app.ui.my_component import MyComponent

   def test_my_component():
       # ...
   ```

3. **Создавайте примеры использования**:
   ```python
   # examples/run_my_component.py
   import sys
   from gopiai.app.ui.my_component import MyComponent

   def main():
       # ...
   ```

## Тестирование модулей

Для тестирования модулей используйте:

```bash
cd GopiAI-Core  # или другой модуль
pytest tests/
```

Или запустите все тесты:

```bash
python run_tests.py
```

## Сборка проекта

Для сборки проекта из отдельных модулей:

1. **Создайте папку для сборки**:
   ```
   C:\Users\username\GopiAI-Build
   ```

2. **Скопируйте скрипт сборки**:
   - Скопируйте `build_project.py` в `C:\Users\username\GopiAI-Build`

3. **Укажите пути к модулям в скрипте сборки**:
   ```python
   # build_project.py
   MODULES = [
       "C:\\Users\\username\\GopiAI-Core",
       "C:\\Users\\username\\GopiAI-Widgets",
       "C:\\Users\\username\\GopiAI-Extensions",
       "C:\\Users\\username\\GopiAI-App",
       "C:\\Users\\username\\GopiAI-Assets",
   ]
   ```

4. **Запустите сборку**:
   ```bash
   cd C:\Users\username\GopiAI-Build
   python build_project.py
   ```

5. **Запустите приложение**:
   ```bash
   cd C:\Users\username\GopiAI-Build\build
   python main.py
   ```

## Добавление нового модуля

Для добавления нового модуля:

1. **Создайте структуру модуля**:
   ```
   C:\Users\username\GopiAI-MyModule\
   ├── gopiai\
   │   ├── __init__.py  # namespace package
   │   └── mymodule\
   │       ├── __init__.py
   │       └── ...
   ├── tests\
   ├── examples\
   └── pyproject.toml
   ```

2. **Добавьте модуль в скрипт сборки**:
   ```python
   # build_project.py
   MODULES = [
       # ...
       "C:\\Users\\username\\GopiAI-MyModule",
   ]
   ```

## Важные замечания

1. **Не изменяйте структуру namespace package**:
   - Файл `gopiai/__init__.py` должен содержать:
     ```python
     __path__ = __import__('pkgutil').extend_path(__path__, __name__)
     ```

2. **Соблюдайте зависимости между модулями**:
   - `gopiai-core` не зависит от других модулей
   - `gopiai-widgets` зависит от `gopiai-core`
   - `gopiai-extensions` зависит от `gopiai-core` и `gopiai-widgets`
   - `gopiai-app` зависит от `gopiai-core`, `gopiai-widgets` и `gopiai-extensions`
   - `gopiai-assets` зависит от `gopiai-core`

3. **Документируйте изменения**:
   - Обновляйте README.md при внесении изменений
   - Добавляйте комментарии к коду
   - Создавайте тесты для новой функциональности
