# Инструкция по сборке и тестированию GopiAI

## Подготовка

Перед запуском убедитесь, что у вас есть все необходимые модули:

- `C:\Users\crazy\GopiAI-Core` - базовый модуль
- `C:\Users\crazy\GopiAI-Widgets` - модуль с виджетами
- `C:\Users\crazy\GopiAI-Extensions` - модуль с расширениями
- `C:\Users\crazy\GopiAI-App` - модуль с основной логикой
- `C:\Users\crazy\GopiAI-Assets` - модуль с ресурсами
- `C:\Users\crazy\GopiAI-Build` - модуль с инструментами сборки

## Варианты запуска

### 1. Улучшенная сборка и запуск интерфейса с виртуальным окружением

Для полной сборки и запуска интерфейса в изолированном виртуальном окружении выполните:

```powershell
cd C:\Users\crazy\GopiAI-App
python enhanced_build_and_test.py
```

Этот скрипт:
1. Проверяет наличие всех модулей
2. Создает виртуальное окружение в папке `venv`
3. Устанавливает необходимые зависимости в виртуальное окружение
4. Собирает проект из всех модулей, включая иконки и ресурсы
5. Запускает интерфейс из виртуального окружения

**Рекомендуется использовать этот скрипт вместо устаревшего `build_and_test.py`**

### 2. Быстрый запуск интерфейса без пересборки

Если вы уже выполнили сборку и хотите только запустить интерфейс:

```powershell
cd C:\Users\crazy\GopiAI-App
python run_interface.py
```

Для запуска в режиме отладки с подробными сообщениями:

```powershell
python run_interface.py --debug
```

### 3. Запуск упрощенного тестового интерфейса

Если у вас возникают проблемы с запуском полного интерфейса, вы можете использовать упрощенный тестовый интерфейс:

```powershell
cd C:\Users\crazy\GopiAI-App
python run_interface.py --simple
```

Этот режим запускает минимальный интерфейс на основе PySide6 без зависимостей от других модулей.
Он подходит для проверки базовой функциональности и работы виртуального окружения.

Для запуска в режиме отладки:

```powershell
python run_interface.py --simple --debug
```

### 4. Проверка агентов

Для тестирования работоспособности агентов без полной сборки приложения:

```powershell
cd C:\Users\crazy\GopiAI-App
python test_agents.py
```

Этот скрипт проверяет:
- Работает ли виртуальное окружение
- Доступен ли PySide6
- Работает ли базовый интерфейс для агентов
- Симулирует запросы к агентам

### 5. Получение информации о тестовой среде

Чтобы получить информацию о тестовой среде и доступных командах:

```powershell
cd C:\Users\crazy\GopiAI-App
python show_test_info.py
```

Этот скрипт отображает:
- Баннер с основными командами для тестирования
- Информацию о системе и окружении
- Статус установки ключевых пакетов

### 6. Запуск примеров

Чтобы запустить один из примеров из директории `examples` (скрипт автоматически использует Python из виртуального окружения, если оно создано):

```bash
cd C:\Users\crazy\GopiAI-App
python run_example.py имя_примера
```

Где `имя_примера` - имя файла примера без расширения `.py`.

Список доступных примеров:
- `external_ai_services_example`
- `hybrid_browser_agent_example`
- `run_browser_specialized_agent`
- `run_my_component`

Чтобы запустить все примеры:

```bash
cd C:\Users\crazy\GopiAI-App
python run_example.py all
```

### 3. Ручная сборка и запуск

Если вам нужно собрать проект вручную:

1. Выполните сборку проекта:
   ```bash
   cd C:\Users\crazy\GopiAI-Build
   python build_project.py
   ```

2. Перейдите в папку сборки и запустите:
   ```bash
   cd C:\Users\crazy\GopiAI-Build\build
   python main.py
   ```

## Логи

Все логи скриптов `build_and_test.py` и `run_example.py` сохраняются в директории `logs` в формате `YYYYMMDDHHMMSS.log`.

## Тестирование инструментов и агентов

### Запуск тестов с помощью скрипта run_test.py

Для запуска любого теста используйте скрипт `run_test.py`, который автоматически использует интерпретатор Python из виртуального окружения:

```powershell
cd C:\Users\crazy\GopiAI-App
python run_test.py имя_теста
```

Для запуска всех тестов:

```powershell
cd C:\Users\crazy\GopiAI-App
python run_test.py all
```

### Основные тесты

1. **Тестирование инструментов**

```powershell
python run_test.py test_tools
```

Этот тест проверяет работу инструментов:
- `StrReplaceEditor` - инструмент для замены строк в файлах
- `PythonExecute` - инструмент для выполнения Python-кода

2. **Тестирование гибридного агента**

```powershell
python run_test.py test_hybrid_agent
```

3. **Тестирование специализированного браузерного агента**

```powershell
python run_test.py test_browser_specialized_agent
```

4. **Тестирование браузерного адаптера**

```powershell
python run_test.py test_browser_adapter
```

## Устранение проблем

1. **Ошибка "No module named 'PySide6'"**
   
   Установите PySide6 в виртуальное окружение:
   ```powershell
   cd C:\Users\crazy\GopiAI-App
   .\venv\Scripts\pip install PySide6
   ```

2. **Ошибка "No module named 'gopiai'"**
   
   Проверьте, что сборка выполнена правильно и все модули присутствуют в директории сборки. Также убедитесь, что виртуальное окружение настроено правильно.

3. **Ошибки с импортами модулей**
   
   Проверьте, что все модули находятся в правильных директориях и имеют правильную структуру.

4. **Очистка и пересоздание виртуального окружения**

   Если у вас возникают проблемы, попробуйте удалить и пересоздать виртуальное окружение:
   ```powershell
   cd C:\Users\crazy\GopiAI-App
   Remove-Item -Recurse -Force venv
   python build_and_test.py
   ```
